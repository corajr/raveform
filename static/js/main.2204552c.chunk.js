(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,n){"use strict";var r=n(6),o=n(5),a=n(0),i=n(30),u=n(7),c=n(1);function l(e){if("number"!==typeof e)return"custom";switch(e){case 0:return"sine";case 1:return"square";case 2:return"sawtooth";case 3:return"triangle"}}function s(e){return 440*Math.pow(2,(e-69)/12)}function v(e){return 1/(Math.pow(2,1/e)-1)}var f=v(48),d=[-12,0,20,.01,.05];var m=function(e){return function(){var t,n,r,o,a,i,u;t=n=r=o=a=i=u=0;var c=e.createScriptProcessor(4096,1,1);return c.onaudioprocess=function(e){for(var c=e.outputBuffer.getChannelData(0),l=0;l<4096;l++){var s=2*Math.random()-1;t=.99886*t+.0555179*s,n=.99332*n+.0750759*s,r=.969*r+.153852*s,o=.8665*o+.3104856*s,a=.55*a+.5329522*s,i=-.7616*i-.016898*s,c[l]=t+n+r+o+a+i+u+.5362*s,c[l]*=.11,u=.115926*s}},c}()};function p(e,t,n){if(t.type=l(n),"number"===typeof n)return 0;var r=n[0],o=e.createPeriodicWave(r[0],r[1]);return t.setPeriodicWave(o),0}function g(e,t,n){var r=void 0!==e?e:440,o=void 0!==t?t:0,a=n.createOscillator(),i=n.currentTime;return a.frequency.setValueAtTime(r,i),p(n,a,o),a}function _(e){switch(0|e.tag){case 0:return"lowpass";case 1:return"highpass";case 2:return"bandpass";case 3:return"lowshelf";case 4:return"highshelf";case 5:return"peaking";case 6:return"notch";case 7:return"allpass"}}function h(e,t){var n=e.createBiquadFilter();n.type=_(t);var r=e.currentTime,o=0;switch(0|t.tag){case 3:case 4:o=1;break;case 5:n.frequency.setValueAtTime(t[0],r),n.Q.setValueAtTime(t[1],r),n.gain.setValueAtTime(t[2],r);break;default:n.frequency.setValueAtTime(t[0],r),n.Q.setValueAtTime(t[1],r)}return 1===o&&(n.frequency.setValueAtTime(t[0],r),n.gain.setValueAtTime(t[1],r)),n}function y(e,t,n,o){var i=n?c.some(e.createGain()):void 0,u=e.createGain(),l=e.currentTime,s=void 0!==i?function(t){var n=a._2(o,e,t);return i.connect(n),n}:a._1(o,e),v=r.init(t,s),f=r.map(function(t){var n=e.createGain();return n.gain.setValueAtTime(0,l),t.connect(n),n.connect(u),n},v);return[i,v,f,u,e]}function k(e,t){for(var n=e[4].currentTime,r=t.length,o=0,a=r-1|0;o<=a;++o){var i=(r-o|0)-1|0;u.caml_array_get(e[2],i).gain.linearRampToValueAtTime(u.caml_array_get(t,o),n+.05)}return 0}var w=m;t.makeDefaultAudioCtx=function(){return new(window.AudioContext||window.webkitAudioContext)},t.string_of_oscillatorType=l,t.oscillatorType_of_string=function(e){switch(e){case"sawtooth":return 2;case"sine":return 0;case"square":return 1;case"triangle":return 3;default:return 0}},t.midiNoteA440Hz=69,t.noteToFrequency=s,t.yToFrequency=function(e,t,n){var r=e,o=t;return function(e){return s((n-e|0)/r+o)}},t.qForBinsPerOctave=v,t.defaultQ=f,t.defaultCompressorValues=d,t.makeCompressor=function(e,t){var n=void 0!==t?t:d,r=e.createDynamicsCompressor(),o=e.currentTime;return r.threshold.setValueAtTime(n[0],o),r.knee.setValueAtTime(n[1],o),r.attack.setValueAtTime(n[3],o),r.release.setValueAtTime(n[4],o),r},t.pinkNoiseFull=m,t.cheaperPinkNoise=function(e){return function(){var t,n,r;t=n=r=0;var o=e.createScriptProcessor(4096,1,1);return o.onaudioprocess=function(e){for(var o=e.outputBuffer.getChannelData(0),a=0;a<4096;a++){var i=2*Math.random()-1;t=.99765*t+.099046*i,n=.963*n+.2965164*i,r=.57*r+1.0526913*i,o[a]=t+n+r+.1848*i}},o}()},t.pinkNoise=w,t.whiteNoise=function(e){return function(){var t=e.createScriptProcessor(4096,1,1);return t.onaudioprocess=function(e){for(var t=e.outputBuffer.getChannelData(0),n=0;n<4096;n++){var r=2*Math.random()-1;t[n]=r}},t}()},t.makeAnalyser=function(e,t,n,r,o){var a=void 0!==e?e:2048,i=void 0!==t?t:-100,u=void 0!==n?n:-30,c=void 0!==r?r:.8,l=o.createAnalyser();return l.fftSize=a,l.minDecibels=i,l.maxDecibels=u,l.smoothingTimeConstant=c,l},t.setOscillatorType=p,t.makeOscillator=g,t.string_of_filterType=_,t.makeFilter=h,t.makeBankOf=y,t.makeFilterBank=function(e,t,n,r){return y(e,t,!0,function(e,i){return h(e,o.__(2,[a._1(r,t-i|0),n]))})},t.makeOscillatorBank=function(e,t,n,r){var o=y(e,t,!1,function(e,o){return g(a._1(r,t-o|0),n,e)}),i=e.currentTime;return o[3].gain.setValueAtTime(.007,i),o},t.getAudioSource=function(e){var t=i.getAudioStream(0);return void 0!==t?c.valFromOption(t).then(function(t){return Promise.resolve(e.createMediaStreamSource(t))}).catch(function(e){return console.log(e),Promise.resolve(void 0)}):Promise.resolve(void 0)},t.connectFilterBank=function(e,t,n,r){var o=t[0];return void 0!==o&&e.connect(c.valFromOption(o)),t[3].connect(n,0,r),0},t.disconnectFilterBank=function(e,t,n){var r=t[0];return void 0!==r&&e.disconnect(c.valFromOption(r)),t[3].disconnect(function(e,t,n,r,o){return{threshold:e,knee:t,ratio:n,attack:r,release:o}}),0},t.updateBankGains=k,t.updateFilterBank=function(e,t,n,r){var o=void 0!==e?e:1,a=void 0!==t?t:.1,i=n[4].currentTime,u=n[0];return void 0!==u&&c.valFromOption(u).gain.setValueAtTime(o,i),n[3].gain.setValueAtTime(a,i),k(n,r)},t.updateFilterBankDefinition=function(e,t,n){console.log("updating filter bank definitions (costly!)");var o=e[4].currentTime,i=e[1].length;return r.iteri(function(e,r){return r.Q.setValueAtTime(n,o),r.frequency.setValueAtTime(a._1(t,(i-e|0)-1|0),o),0},e[1])}},,function(e,t,n){"use strict";var r=n(0),o=n(34),a=n(35),i=n(18),u=n(41);var c=o.MakeComparable([function(e,t){var n=i.caml_compare(e[0],t[0]);if(0!==n)return n;var r=i.caml_compare(e[1],t[1]);if(0!==r)return r;var o=i.caml_compare(e[2],t[2]);return 0!==o?o:i.caml_compare(e[3],t[3])}]),l=a.make(c),s=[u.empty,l,l];function v(e,t){return a.partition(t,function(t){return e===t[0]||e===t[1]})}function f(e,t,n){var o=t[3],a=t[2],i=t[1],c=t[0],l=u.get(n[0],c),s=u.get(n[0],i);if(void 0!==l&&void 0!==s)return r._4(e,l,s,a,o),[c,i,a,o]}function d(e,t){return a.forEach(e,function(e){return f(function(e,t,n,r){return e.disconnect(t,n,r),0},e,t),0})}t.EdgeComparator=c,t.emptyEdgeSet=l,t.emptyAudioGraph=s,t.getNode=function(e,t){return u.get(t[0],e)},t.addNode=function(e,t){return[u.set(t[0],e[0],e[1]),t[1],t[2]]},t.partitionEdgesWithNode=v,t.removeAllEdgesInvolvingNode=function(e,t){return[t[0],v(e,t[1])[1],t[2]]},t.removeNode=function(e,t){return[u.remove(t[0],e),t[1],t[2]]},t.addEdge=function(e,t){return[t[0],a.add(t[1],e),t[2]]},t.removeEdge=function(e,t){return[t[0],a.remove(t[1],e),t[2]]},t.maybeApplyToGraph=f,t.disconnectEdges=d,t.updateConnections=function(e){var t=a.diff(e[1],e[2]);d(a.diff(e[2],e[1]),e);var n=a.reduce(t,l,function(t,n){var r=f(function(e,t,n,r){return e.connect(t,n,r),0},n,e);return void 0!==r?a.add(t,r):t});return[e[0],e[1],n]},t.replaceNode=function(e,t,n){var r=v(e,n[2]);return d(r[0],n),[u.set(n[0],e,t),n[1],r[1]]}},,,,,,,,,function(e,t,n){"use strict";var r=n(6),o=n(0),a=n(3),i=n(4),u=n(1);t.Make=function(e){var t=i.statelessComponent("OscillatorTypeSelect");return[e[0],e[1],e[2],e[3],t,function(n,i,c){var l=void 0!==i?u.valFromOption(i):e[0];return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],function(){return a.createElement("select",{value:o._1(e[2],l),onChange:function(t){var r=t.target.value;return o._1(n,o._1(e[3],r))}},r.map(function(t){var n=o._1(e[2],t);return a.createElement("option",{key:n,value:n},n)},e[1]))},t[10],t[11],t[12],t[13]]}]}},,,,,function(e,t,n){e.exports=n(26)},function(e,t,n){"use strict";var r=n(27),o=n(59),a=n(4),i=n(64);n(65),o.renderToElementWithId(a.element(void 0,void 0,r.make([])),"root"),i.unregister()},function(e,t,n){"use strict";var r=n(3),o=n(29),a=n(4),i=n(44),u=n(45),c=n(55);n(57);var l=a.statelessComponent("App");t.component=l,t.make=function(){return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],function(){return r.createElement("div",{className:"App"},a.element(void 0,void 0,i.make(function(e){var t=e[1],n=e[0];return r.createElement("div",{style:{display:"flex",flexDirection:"row"}},a.element(void 0,void 0,o.make(n,t,512,512,void 0,[])),r.createElement("div",{style:{marginLeft:"24px"}},a.element(void 0,void 0,c.make("osc1",n,t,void 0,[])),a.element(void 0,void 0,u.make(n,t,void 0,void 0,[]))))},[])))},l[10],l[11],l[12],l[13]]}},,function(e,t,n){"use strict";var r=n(6),o=n(9),a=n(0),i=n(31),u=n(32),c=n(11),l=n(7),s=n(43),v=n(4),f=n(1);function d(e,t,n,o,a,u,c,v,d,m){var p=e[1],g=void 0!==o?f.valFromOption(o):void 0,_=void 0!==a&&a,h=void 0!==u?u:1,y=void 0!==v?v:1;if(m%(1e3/c)>=33)return 0;var k=d.getContext("2d"),w=t,T=n,b=0,A=p[0][0],C=p[1][0],F=p[2][0],S=p[3][0];if(void 0!==A){var E=f.valFromOption(A);if(void 0!==C){if(void 0!==F&&void 0!==S){var O=f.valFromOption(F),M=f.valFromOption(C);void 0!==g&&(k.globalCompositeOperation=s.Composite[0],s.setFillStyle(k,0,"rgba(0,0,0,"+String(f.valFromOption(g))+")")),k.fillRect(0,0,w,T),E.getByteTimeDomainData(M),E.getByteFrequencyData(O);var V=M.length,q=r.map(function(e){return e/128-1},M),W=i.haar(q),B=T/V,N=w/V;k.globalAlpha=h,k.globalCompositeOperation=s.Composite[8],s.setFillStyle(k,0,"red");for(var D=0,R=V-1|0;D<=R;++D){var x=l.caml_array_get(O,D)/256,P=Math.log1p(x)/Math.log(2)*w;k.fillRect(0,D*B,P,B)}Math.log(T),Math.log(2);for(var U=Math.log(V)/Math.log(2),G=0,z=(0|U)-1|0;G<=z;++G)for(var Q=Math.pow(2,G),H=0|Q,I=w/Q,J=T/U,L=J*G,j=0,$=H-1|0;j<=$;++j){var K=j*I,X=i.waveletCoefToUint8(l.caml_array_get(W,H+j|0));s.setFillStyle(k,0,"rgba(0,0,"+X.toString()+","+y.toString()+")"),k.fillRect(K,L,I,J)}if(_){for(;b<V&&(l.caml_array_get(M,b)-128|0)>0;)b=b+1|0;for(b===V&&(b=0);b<V&&(l.caml_array_get(M,b)-128|0)<5;)b=b+1|0;b===V&&(b=0)}s.setStrokeStyle(k,0,"green"),k.beginPath();for(var Y=b,Z=(b+V|0)-1|0;Y<=Z;++Y){var ee=Y>=V?Y-V|0:Y,te=(Y-b|0)*N,ne=T-l.caml_array_get(M,ee)/256*T;k.lineTo(te,ne)}return k.stroke(),0}return 0}return void 0!==F||void 0!==S?0:(p[1][0]=f.some(new Uint8Array(E.frequencyBinCount)),p[2][0]=f.some(new Uint8Array(E.frequencyBinCount)),p[3][0]=f.some(k.createImageData(256,256)),0)}return 0}var m=v.reducerComponent("Raveform");t.animCallback=d,t.component=m,t.make=function(e,t,n,r,i,l){var s=void 0!==i?i:"defaultAnalyser";return[m[0],m[1],m[2],m[3],function(i){var u=o.makeAnalyser(4096,void 0,void 0,void 0,e);i[1][0][0]=f.some(u),t[0]=c.updateConnections(c.addEdge([s,"sink",0,0],c.addNode([s,u],t[0])));var l=function(e,t,o){return d(i,n,r,1,!1,1,60,e,t,o)};return i[1][4][0]=function(e){return a._2(l,void 0,e)},0},m[5],m[6],m[7],m[8],function(e){return v.element(void 0,void 0,u.make(e[1][4],n,r,[]))},function(){return[[void 0],[void 0],[void 0],[void 0],[void 0]]},m[11],function(e,t){return 0},m[13]]}},function(e,t,n){"use strict";var r=n(1),o=function(e){return navigator.mediaDevices.getUserMedia?(console.log("getUserMedia supported."),navigator.mediaDevices.getUserMedia(e)):(console.log("getUserMedia not supported on your browser!"),null)};t._getStream=o,t.getAudioVisualStream=function(){return r.nullable_to_opt(o({audio:!0,video:!0}))},t.getAudioStream=function(){return r.nullable_to_opt(o({audio:!0,video:!1}))},t.getVideoStream=function(){return r.nullable_to_opt(o({audio:!1,video:!0}))}},function(e,t,n){"use strict";var r=n(6),o=n(0),a=n(7),i=n(17),u=n(10),c=Math.sqrt(2),l=1/c;function s(e,t,n){var o=n.length;return r.init(u.div(o,e),function(r){return a.caml_array_get(n,u.imul(r,e)+t|0)})}function v(e){return s(2,0,e)}function f(e){return s(2,1,e)}function d(e,t,n){return r.mapi(function(t,r){return o._2(e,r,a.caml_array_get(n,t))},t)}var m=Math.pow(2,-8);function p(e){return 127+(128*e|0)|0}t.root2=c,t.oneOverRoot2=l,t.eltsWithStepAndOffset=s,t.evens=v,t.odds=f,t.zipWith=d,t.threshold=function(e,t){return r.map(function(e){return Math.abs(e)<t?0:e},e)},t.haar=function e(t){if(t.length>1){var n=v(t),o=f(t),a=d(function(e,t){return(e+t)*l},n,o),i=d(function(e,t){return(e-t)*l},n,o);return r.append(e(a),i)}return t},t.inverseHaar=function e(t){var n=t.length;if(n>1){for(var o=n/2|0,i=r.map(function(e){return e*c},e(r.sub(t,0,o))),u=a.caml_make_vect(n,0),l=0,s=o-1|0;l<=s;++l){var v=a.caml_array_get(t,l+o|0)*c;a.caml_array_set(u,l<<1,(a.caml_array_get(i,l)+v)/2),a.caml_array_set(u,1+(l<<1)|0,(a.caml_array_get(i,l)-v)/2)}return u}return t},t.inplaceFWHT=function(e){for(var t=1,n=e.length;t<n;){for(var r=0,o=u.div(n,t<<1)-1|0;r<=o;++r)for(var i=u.imul(r,t<<1),c=i,l=(i+t|0)-1|0;c<=l;++c){var s=a.caml_array_get(e,c),v=a.caml_array_get(e,c+t|0);a.caml_array_set(e,c,s+v|0),a.caml_array_set(e,c+t|0,s-v|0)}t<<=1}return e},t.log2OfWaveletEpsilon=-8,t.waveletEpsilon=m,t.signalFloatToUint8=p,t.waveletCoefToUint8=function(e){var t,n=Math.abs(e);if(n<m)t=0;else{var r=(Math.log(n)/Math.log(2)- -8)/(2*Math.abs(-8));t=i.caml_copysign_float(r,e)}return p(t)}},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(4),i=n(1);function u(e,t){return t[1][0][0]=null==e?void 0:i.some(e),0}var c=a.reducerComponent("RafCanvas");t.setCanvasRef=u,t.component=c,t.make=function(e,t,n,a){return[c[0],c[1],c[2],c[3],function(e){var t=function(n){var o=e[1][0][0],a=e[1][1][0];return void 0!==o&&void 0!==a&&r._2(a,i.valFromOption(o),n),e[1][2][0]=i.some(requestAnimationFrame(t)),0};return r._1(e[4],function(){var t=e[1][2][0];return void 0!==t?(cancelAnimationFrame(i.valFromOption(t)),0):0}),t(0)},c[5],c[6],c[7],c[8],function(e){return o.createElement("canvas",{ref:r._1(e[0],u),height:n.toString(),width:t.toString()})},function(){return[[void 0],e,[void 0]]},c[11],function(e,t){return 0},c[13]]}},,,,,,,,,,,,function(e,t,n){"use strict";var r=n(9),o=n(5),a=n(0),i=n(11),u=n(4),c=n(1),l=u.reducerComponent("AudioContext");t.component=l,t.make=function(e,t){return[l[0],l[1],l[2],l[3],function(e){return a._1(e[3],[a._1(r.makeDefaultAudioCtx,0)])},l[5],l[6],l[7],l[8],function(t){var n=t[1][0];return void 0!==n?a._1(e,[c.valFromOption(n),t[1][1]]):null},function(){return[void 0,[i.emptyAudioGraph]]},l[11],function(e,t){if("number"===typeof e)return 0!==e?o.__(1,[function(e){var t=e[1][0];return void 0!==t?(c.valFromOption(t).suspend(),0):0}]):o.__(1,[function(e){var t=e[1][0];return void 0!==t?(c.valFromOption(t).resume(),0):0}]);var n=e[0];return o.__(2,[[c.some(n),t[1]],function(e){return e[1][1][0]=i.updateConnections(i.addNode(["sink",n.destination],e[1][1][0])),0}])},l[13]]}},function(e,t,n){"use strict";var r=n(6),o=n(5),a=n(0),i=n(3),u=n(16),c=n(46),l=n(20),s=n(47),v=n(54),f=n(14),d=n(4);var m=l.Make([0,[0,1,2],function(e){switch(e){case 0:return"sine-512";case 1:return"saw-512";case 2:return"custom"}},function(e){switch(e){case"custom":return 2;case"saw-512":return 1;case"sine-512":default:return 0}}]);function p(e){return 1!==e?s.sineSamples:s.sawSamples}var g=d.reducerComponent("StatefulWavetable");t.WavetableSelect=m,t.toWavetable=p,t.component=g,t.make=function(e,t,n,l,_){var h=void 0!==n?n:"defaultWavetable",y=void 0!==l?l:"defaultAnalyser";return[g[0],g[1],g[2],g[3],g[4],g[5],g[6],g[7],g[8],function(n){var l=n[1][1];return i.createElement("div",void 0,i.createElement("h2",void 0,"Wavetable: "+h),i.createElement("fieldset",void 0,d.element(void 0,void 0,a._3(m[5],function(e){return a._1(n[3],o.__(0,[e]))},n[1][1],[])),l>=2?i.createElement("div",void 0,i.createElement("input",{type:"text",value:JSON.stringify(n[1][0]),onChange:function(e){var t,i=e.target.value,l=0;try{t=JSON.parse(i),l=1}catch(d){var s=u.internalToOCamlException(d);return console.log(s),0}if(1===l){var f=v.getWithDefault(c.decodeArray(t),[]);return a._1(n[3],o.__(1,[r.map(function(e){return v.getWithDefault(c.decodeNumber(e),0)},f)]))}}})):null),i.createElement("fieldset",void 0,i.createElement("label",void 0,"gain"),i.createElement("input",{step:.01,type:"number",value:n[1][3].toString(),onChange:a._1(n[0],function(e,t){var n=e.target.value,r=f.caml_float_of_string(n);return a._1(t[3],o.__(3,[r]))})}),i.createElement("label",void 0,"playback rate"),i.createElement("input",{step:.01,type:"number",value:n[1][2].toString(),onChange:a._1(n[0],function(e,t){var n=e.target.value,r=f.caml_float_of_string(n);return a._1(t[3],o.__(2,[r]))})})),d.element(h,void 0,s.make(e,t,void 0,y,n[1][3],n[1][2],n[1][0],[])))},function(){return[s.sineSamples,0,1,.25]},g[11],function(e,t){switch(0|e.tag){case 0:var n=e[0];return o.__(0,[[p(n),n,t[2],t[3]]]);case 1:return o.__(0,[[e[0],t[1],t[2],t[3]]]);case 2:return o.__(0,[[t[0],t[1],e[0],t[3]]]);case 3:return o.__(0,[[t[0],t[1],t[2],e[0]]])}},g[13]]}},,function(e,t,n){"use strict";var r=n(48),o=n(6),a=n(0),i=n(3),u=n(11),c=n(7),l=n(17),s=n(10),v=n(24),f=n(4),d=n(1),m=n(8);function p(e,t){for(var n=e.sampleRate,r=t.length,o=e.createBuffer(1,r,0|n),a=o.getChannelData(0),i=0,u=r-1|0;i<=u;++i)c.caml_array_set(a,i,c.caml_array_get(t,i));return o}function g(e,t){return o.init(t,function(n){return a._1(e,n/t)})}function _(e){return Math.sin(2*Math.PI*e)}function h(e){return l.caml_copysign_float(1,_(e))}function y(e){return 2*(e-Math.floor(.5+e))}function k(e){return 2*Math.abs(y(e))-1}var w=g(_,512),T=g(h,512),b=g(k,512),A=g(y,512);function C(e,t){var n=e.length;return o.init(t,function(t){return c.caml_array_get(e,s.mod_(t,n))})}var F=f.reducerComponent("Wavetable");t.makeBuffer=p,t.generateSamplesFromFunction=g,t.makeBufferFromFunction=function(e,t,n){return p(e,g(t,n))},t.sineF=_,t.squareF=h,t.sawF=y,t.triangleF=k,t.fractal1d=function(e,t){r.length(e);for(var n=[[1]],a=0,i=t-1|0;a<=i;++a)n[0]=o.concat(r.map(function(e){return o.map(function(t){return e*t},n[0])},e));return n[0]},t.sineSamples=w,t.squareSamples=T,t.triangleSamples=b,t.sawSamples=A,t.fromText=function(e){var t=e.length;return o.init(t,function(t){return v.get(e,t)/128-1})},t.zeroPad=function(e,t){var n=c.caml_make_vect(t,0),r=m.caml_int_min(e.length-1|0,t-1|0);return o.blit(e,1,n,1,r),n},t.cycle=C,t.swapDiff=function(e,t){var n=e.length/2|0,r=C(t,n);return o.blit(r,0,e,n,n),e},t.component=F,t.make=function(e,t,n,r,o,c,l,s){var v=void 0!==n?n:"defaultWavetable",f=void 0!==r?r:"defaultAnalyser",m=void 0!==o?o:.5,g=void 0!==c?c:1,_=void 0!==l?l:A;return[F[0],F[1],F[2],F[3],function(n){var r=p(e,_),o=e.createBufferSource();o.buffer=r,o.loop=!0,o.playbackRate.value=g,n[1][1][0]=d.some(o);var i=e.createGain();return i.gain.value=m,o.connect(i),o.start(),n[1][2][0]=d.some(i),t[0]=u.updateConnections(u.addEdge([v,"sink",0,0],u.addEdge([v,f,0,0],u.addNode([v,i],t[0])))),a._1(n[4],function(){var e=n[1][1][0];return void 0!==e?(d.valFromOption(e).stop(),0):0})},F[5],F[6],function(t){var n=t[1],r=n[1][1][0],o=n[1][2][0];if(void 0!==r&&void 0!==o){var a=d.valFromOption(o),i=d.valFromOption(r),u=e.currentTime;if(i.playbackRate.setValueAtTime(g,u),t[0][1][0][0]!==_){i.stop();var c=p(e,_),l=e.createBufferSource();l.buffer=c,l.loop=!0,l.playbackRate.value=g,l.connect(a),l.start(),n[1][1][0]=d.some(l),n[1][0][0]=_}return a.gain.setValueAtTime(m,u),0}return 0},F[8],function(){return i.createElement("div",void 0)},function(){return[[_],[void 0],[void 0]]},F[11],function(e,t){return 0},F[13]]}},,,,,,,,function(e,t,n){"use strict";var r=n(9),o=n(5),a=n(0),i=n(3),u=n(20),c=n(56),l=n(14),s=n(4),v=u.Make([0,[0,3,2,1],r.string_of_oscillatorType,r.oscillatorType_of_string]);function f(e,t){return e/512*Math.pow(2,(t-41)/12)}var d=u.Make([1,[0,1],function(e){return e?"period":"frequency"},function(e){switch(e){case"frequency":return 0;case"period":default:return 1}}]),m=s.reducerComponent("StatefulOscillator");var p=f;t.OscillatorTypeSelect=v,t.shiftedMidiCps=f,t.freqToMidiNote=function(e,t){var n=Math.log(t/440)/Math.log(2)*12+69;return n-Math.floor(n)<=.5?0|n:1+(0|n)|0},t.midiNoteToFreq=p,t.FrequencyOrPeriodSelect=d,t.component=m,t.make=function(e,t,n,r,u){var p=void 0!==r?r:"defaultAnalyser";return[m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8],function(r){var u=r[1][1];return i.createElement("div",void 0,i.createElement("h2",void 0,"Oscillator: "+e),i.createElement("fieldset",void 0,s.element(void 0,void 0,a._3(v[5],a._1(r[0],function(e,t){return a._1(t[3],o.__(0,[e]))}),r[1][0],[]))),i.createElement("fieldset",void 0,s.element(void 0,void 0,a._3(d[5],a._1(r[0],function(e,t){return a._1(t[3],o.__(1,[e]))}),r[1][1],[])),u?i.createElement("input",{step:1,type:"number",value:(t.sampleRate/r[1][2]).toString(),onChange:a._1(r[0],function(e,t){var n=e.target.value,r=l.caml_float_of_string(n);return r>0?a._1(t[3],o.__(3,[r])):0})}):i.createElement("input",{step:1,type:"number",value:r[1][2].toString(),onChange:a._1(r[0],function(e,t){var n=e.target.value,r=l.caml_float_of_string(n);return r>0?a._1(t[3],o.__(2,[r])):0})})),i.createElement("fieldset",void 0,i.createElement("label",void 0,"gain"),i.createElement("input",{step:.01,type:"number",value:r[1][3].toString(),onChange:a._1(r[0],function(e,t){var n=e.target.value,r=l.caml_float_of_string(n);return a._1(t[3],o.__(5,[r]))})})),s.element(void 0,void 0,c.make(t,n,e,r[1][2],r[1][3],r[1][0],p,[])))},function(){return[v[0],d[0],t.sampleRate/512,.25]},m[11],function(e,n){switch(0|e.tag){case 0:return o.__(0,[[e[0],n[1],n[2],n[3]]]);case 1:return o.__(0,[[n[0],e[0],n[2],n[3]]]);case 2:return o.__(0,[[n[0],n[1],e[0],n[3]]]);case 3:return o.__(0,[[n[0],n[1],t.sampleRate/e[0],n[3]]]);case 4:return o.__(0,[[n[0],n[1],f(t.sampleRate,e[0]),n[3]]]);case 5:return o.__(0,[[n[0],n[1],n[2],e[0]]])}},m[13]]}},function(e,t,n){"use strict";var r=n(9),o=n(0),a=n(3),i=n(11),u=n(21),c=n(4),l=n(1),s=c.reducerComponent("Oscillator");t.component=s,t.make=function(e,t,n,c,v,f,d,m){var p=void 0!==c?c:440,g=void 0!==v?v:.5,_=void 0!==f?f:0,h=void 0!==d?d:"defaultAnalyser";return[s[0],s[1],s[2],s[3],function(a){var u=e.createGain();u.gain.value=g,a[1][1][0]=l.some(u);var c=r.makeOscillator(p,_,e);return a[1][0][0]=l.some(c),c.connect(u),c.start(),t[0]=i.updateConnections(i.addEdge([n,h,0,0],i.addNode([n,u],t[0]))),o._1(a[4],function(){var e=a[1][0][0];return void 0!==e?(l.valFromOption(e).stop(),0):0})},s[5],s[6],function(t){var n=t[1],o=n[1][0][0],a=n[1][1][0];if(void 0!==o&&void 0!==a){var i=l.valFromOption(o),u=e.currentTime;return i.type=r.string_of_oscillatorType(_),l.valFromOption(a).gain.setValueAtTime(g,u),i.frequency.setValueAtTime(p,u),0}return 0},s[8],function(){return a.createElement("div",void 0,u.string_of_float(p)+" Hz")},function(){return[[void 0],[void 0]]},s[11],function(e,t){return 0},s[13]]}},function(e,t,n){},,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"register",function(){return o}),n.d(t,"unregister",function(){return i});var r=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function o(e){if("serviceWorker"in navigator){if(new URL("/raveform",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/raveform","/service-worker.js");r?(!function(e,t){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):a(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):a(t,e)})}}function a(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available; please refresh."),t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function i(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},function(e,t,n){}],[[25,2,1]]]);
//# sourceMappingURL=main.2204552c.chunk.js.map